<?php

namespace App\Repositories;


use App\Models\Article;

class BasketSessionRepository implements BasketInterfaceRepository  {

	# Afficher le panier
	public function show () {
		return view("basket.show"); // resources\views\basket\show.blade.php
	}

	# Ajouter/Mettre à jour un produit du panier
	public function add (Article $article, $quantite) {		
		$basket = session()->get("basket"); // On récupère le panier en session

		// Les informations du produit à ajouter
		$article_details = [
			'name' => $article->name,
			'price' => $article->price,
			'quantity' => $quantite
		];
		
		$panier[$article->id] = $article_details; // On ajoute ou on met à jour le produit au panier
		session()->put("panier", $panier); // On enregistre le panier
	}

	# Retirer un produit du panier
	public function remove (Article $article) {
		$panier = session()->get("panier"); // On récupère le panier en session
		unset($panier[$article->id]); // On supprime le produit du tableau $panier
		session()->put("panier", $panier); // On enregistre le panier
	}

	# Vider le panier
	public function empty () {
		session()->forget("panier"); // On supprime le panier en session
	}

}

?>